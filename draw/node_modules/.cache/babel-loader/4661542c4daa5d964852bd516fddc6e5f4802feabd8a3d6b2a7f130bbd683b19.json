{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nexport default {\n  name: 'MyDetail',\n  data() {\n    return {\n      num: 1,\n      dialogVisible: false,\n      list: [],\n      a: []\n    };\n  },\n  methods: {\n    handler(event) {\n      // this.$nextTick(()=>{\n\n      // })\n      // ref:在js精准获取元素\n      let mask = this.$refs.mask;\n      let big = this.$refs.big;\n      let left = event.offsetX - mask.offsetWidth / 2;\n      let top = event.offsetY - mask.offsetHeight / 2;\n      // 修改left和top属性值\n      if (left <= 0) left = 0;\n      if (left >= mask.offsetWidth) left = mask.offsetWidth;\n      if (top <= 0) top = 0;\n      if (top >= mask.offsetHeight) top = mask.offsetHeight;\n      mask.style.left = left + 'px';\n      mask.style.top = top + 'px';\n      big.style.left = -2 * left + 'px';\n      big.style.top = -2 * top + 'px';\n    },\n    handleChange(value) {\n      console.log(value);\n    },\n    handleClose(done) {\n      this.$confirm('确认关闭？').then(_ => {\n        done();\n      }).catch(_ => {});\n    },\n    goshopping() {\n      this.$router.push({\n        name: 'shopping',\n        query: {\n          id: this.$route.query.id\n        }\n      });\n    },\n    searchnum() {\n      axios({\n        method: 'GET',\n        url: 'http://127.0.0.1:3000/num',\n        params: {\n          id: this.$route.query.id\n        }\n      }).then(res => {\n        this.a = res.data;\n        // console.log(this.a[0].num);\n      }).catch(err => {\n        console.log(err.data);\n      });\n    },\n    addsum() {\n      this.dialogVisible = true;\n      setTimeout(() => {\n        axios({\n          method: 'GET',\n          url: 'http://127.0.0.1:3000/updatesum',\n          params: {\n            id: this.$route.query.id,\n            sum: this.num + this.a[0].num\n          }\n        }).then(res => {\n          // console.log(res.data);\n          // this.lis = res.data\n          // console.log(this.a[0]);\n        }).catch(err => {\n          console.log(err.data);\n        });\n      }, 500);\n    }\n  },\n  mounted() {\n    // console.log(this.$route.query.id);\n    axios({\n      method: 'GET',\n      url: 'http://127.0.0.1:3000/detail',\n      params: {\n        id: this.$route.query.id\n      }\n    }).then(res => {\n      // console.log(res.data);\n      this.list = res.data;\n    }).catch(err => {\n      console.log(err.data);\n    });\n  }\n};","map":{"version":3,"mappings":";AA0GA;AACA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACA;;MAEA;MACA;MACA;MACA;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACAC;MACAA;MACAC;MACAA;IACA;IACAC;MACAC;IACA;IACAC;MACA,uBACAC;QACAC;MACA,GACAC;IACA;IACAC;MACA;QACAhB;QACAiB;UACAC;QACA;MACA;IACA;IACAC;MACAC;QACAC;QACAC;QACAC;UACAL;QACA;MACA,GACAL;QAEA;QACA;MACA;QACAF;MACA;IACA;IACAa;MACA;MACAC;QACAL;UACAC;UACAC;UACAC;YACAL;YACAQ;UACA;QACA,GACAb;UACA;UACA;UACA;QAAA,CACA;UACAF;QACA;MACA;IACA;EACA;EACAgB;IACA;IACAP;MACAC;MACAC;MACAC;QACAL;MACA;IACA,GACAL;MACA;MACA;IACA;MACAF;IACA;EACA;AACA","names":["name","data","num","dialogVisible","list","a","methods","handler","mask","big","handleChange","console","handleClose","then","done","catch","goshopping","query","id","searchnum","axios","method","url","params","addsum","setTimeout","sum","mounted"],"sourceRoot":"src/pages","sources":["Detail.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"row no-gutters content-first\">\r\n        <div>\r\n                您所在的位置\r\n                <span>\r\n                    <a href=\"#\">首页</a>\r\n                    >\r\n                    <a href=\"#\">云医院</a>\r\n                </span>\r\n        </div>\r\n    </div>\r\n    <div class=\"row no-gutters content-second\">\r\n        <div>\r\n                <div>就诊指南</div>\r\n                <div>\r\n                    <ul>\r\n                        <li>\r\n                            <a href=\"#\" style=\"color: white;background-color: #ff7544;\"><span>呼吸道疾病</span></a>\r\n                        </li>\r\n                        <li>\r\n                            <a href=\"#\"><span>风湿骨科</span></a>\r\n                        </li>\r\n                        <li>\r\n                            <a href=\"#\"><span>消化系统疾病</span></a>\r\n                        </li>\r\n                        <li>\r\n                            <a href=\"#\"><span>心脑血管</span></a>\r\n                        </li>\r\n                        <li>\r\n                            <a href=\"#\"><span>肝病科</span></a>\r\n                        </li>\r\n                        <li>\r\n                            <a href=\"#\"><span>五官科</span></a>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n                <div>\r\n                    <a href=\"#\">\r\n                        <img src=\"./public/img/ico_001.gif\" alt=\"\">\r\n                        <p>互联智慧分诊平台</p>\r\n                    </a>\r\n\r\n                    <a href=\"#\">\r\n                        <img src=\"./public/img/ico_002.gif\" alt=\"\">\r\n                        <p>96195综合平台</p>\r\n                    </a>\r\n\r\n                    <a href=\"#\">\r\n                        <img src=\"./public/img/ico_003.gif\" alt=\"\">\r\n                        <p>名医馆</p>\r\n                    </a>\r\n\r\n                    <a href=\"#\">\r\n                        <img src=\"./public/img/ico_004.gif\" alt=\"\">\r\n                        <p>信息查询</p>\r\n                    </a>\r\n                </div>\r\n        </div>\r\n        <div>\r\n            <div class=\"spec-preview\">\r\n                <!-- 控制台会报错，因为数据还未返回来之前是个undefined -->\r\n                <!-- <img :src=\"imgObj.imgUrl\" /> -->\r\n                <!-- <img src=\"@/pages/public/img/yao1.jpg\" /> -->\r\n                <img :src=\"require('./public/img/'+this.$route.query.img)\" alt=\"\">\r\n                \r\n                <!-- event这里的event就是存放事件的(鼠标移入事件) -->\r\n                <div class=\"event\" @mousemove=\"handler\"></div>\r\n                <div class=\"big\">\r\n                <!-- <img :src=\"imgObj.imgUrl\" ref=\"big\"/> -->\r\n                <!-- <img src=\"@/pages/public/img/yao1.jpg\" ref=\"big\" /> -->\r\n                <img :src=\"require('./public/img/'+this.$route.query.img)\" ref=\"big\" alt=\"\">\r\n                </div>\r\n                <!-- 蒙版 遮罩层  -->\r\n                <div class=\"mask\" ref=\"mask\"></div>\r\n            </div>\r\n            <div  v-for=\"item in list\" :key=\"item.id\">\r\n                <h1>{{ item.content }}</h1>\r\n                <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ item.details }}</span>\r\n                <div>\r\n                    <div>国药价：</div>\r\n                    <div>￥{{ item.price }}</div>\r\n                </div>\r\n                <div>\r\n                    <span>数&nbsp;量：</span>\r\n                    <el-input-number class=\"shu\" v-model=\"num\" @change=\"handleChange\" :min=\"0\" label=\"描述文字\"></el-input-number>\r\n                    <el-button class=\"mai\" @click=\"addsum();searchnum();\">加入购买</el-button>\r\n                    <el-dialog\r\n                        title=\"提示\"\r\n                        :visible.sync=\"dialogVisible\"\r\n                        width=\"30%\"\r\n                        :before-close=\"handleClose\">\r\n                        <span>添加成功</span>\r\n                        <span slot=\"footer\" class=\"dialog-footer\">\r\n                            <el-button class=\"shoppingbtn\" @click=\"dialogVisible = false\">继续购物</el-button>\r\n                            <el-button class=\"shoppingbtn\" type=\"primary\" @click=\"goshopping\">去购物车结算</el-button>\r\n                        </span>\r\n                    </el-dialog>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\"\r\nexport default {\r\n    name:'MyDetail',\r\n    data() {\r\n      return {\r\n        num: 1,\r\n        dialogVisible: false,\r\n        list:[],\r\n        a:[]\r\n      };\r\n    },\r\n    methods:{\r\n      handler(event) {\r\n        // this.$nextTick(()=>{\r\n\r\n        // })\r\n        // ref:在js精准获取元素\r\n        let mask=this.$refs.mask\r\n        let big=this.$refs.big\r\n\r\n        let left=event.offsetX-mask.offsetWidth/2\r\n        let top=event.offsetY-mask.offsetHeight/2\r\n        // 修改left和top属性值\r\n        if(left<=0) left=0\r\n        if(left>=mask.offsetWidth) left=mask.offsetWidth\r\n        if(top<=0) top=0 \r\n        if(top>=mask.offsetHeight) top=mask.offsetHeight\r\n        mask.style.left= left+'px'\r\n        mask.style.top=top+'px'\r\n        big.style.left= -2*left+'px'\r\n        big.style.top= -2*top+'px'\r\n      },\r\n      handleChange(value) {\r\n        console.log(value);\r\n      },\r\n      handleClose(done) {\r\n        this.$confirm('确认关闭？')\r\n          .then(_ => {\r\n            done();\r\n          })\r\n          .catch(_ => {});\r\n      },\r\n      goshopping(){\r\n        this.$router.push({\r\n            name:'shopping',\r\n            query:{\r\n                id:this.$route.query.id\r\n            }\r\n        })\r\n      },\r\n      searchnum(){\r\n        axios({\r\n                method: 'GET',\r\n                url: 'http://127.0.0.1:3000/num',\r\n                  params: {\r\n                    id:this.$route.query.id\r\n                }\r\n            })\r\n                .then((res) => {\r\n                    \r\n                    this.a = res.data\r\n                    // console.log(this.a[0].num);\r\n                }).catch((err) => {\r\n                    console.log(err.data);\r\n                });\r\n      },\r\n      addsum(){\r\n        this.dialogVisible = true\r\n        setTimeout(()=>{\r\n            axios({\r\n                method: 'GET',\r\n                url: 'http://127.0.0.1:3000/updatesum',\r\n                  params: {\r\n                    id:this.$route.query.id,\r\n                    sum:this.num+this.a[0].num\r\n                }\r\n            })\r\n                .then((res) => {\r\n                    // console.log(res.data);\r\n                    // this.lis = res.data\r\n                    // console.log(this.a[0]);\r\n                }).catch((err) => {\r\n                    console.log(err.data);\r\n                });\r\n        },500)\r\n      }\r\n    },\r\n    mounted() {\r\n        // console.log(this.$route.query.id);\r\n        axios({\r\n                method: 'GET',\r\n                url: 'http://127.0.0.1:3000/detail',\r\n                  params: {\r\n                    id:this.$route.query.id\r\n                }\r\n            })\r\n                .then((res) => {\r\n                    // console.log(res.data);\r\n                    this.list = res.data\r\n                }).catch((err) => {\r\n                    console.log(err.data);\r\n                });\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\ndiv,ul{\r\n    padding: 0;\r\n}\r\n.top-second {\r\n    width: 100%;\r\n\r\n    .content-first {\r\n        >div {\r\n            width: 1200px;\r\n            margin: 0 auto;\r\n            height: 74px;\r\n            background: url(./public/img/bread_ico.png) left 4px center no-repeat;\r\n            padding-left: 25px;\r\n            line-height: 74px;\r\n            color: #666;\r\n            font-size: 12px;\r\n            display: block;\r\n\r\n            >span {\r\n                margin-left: 2px;\r\n\r\n                >a {\r\n                    text-decoration: none;\r\n                    color: #666;\r\n                    font-size: 12px;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    .content-second {\r\n        width: 1200px;\r\n        margin: 0 auto;\r\n        display: flex;\r\n        justify-content: space-between;\r\n\r\n        >div:nth-child(1) {\r\n            display: block;\r\n            width: 240px;\r\n            height: auto;\r\n\r\n            >div:nth-child(1) {\r\n                background: #6bcbca url(./public/img/about_ico06.png) 13px center no-repeat;\r\n                width: 100%;\r\n                height: 62px;\r\n                padding-left: 63px;\r\n                font-size: 18px;\r\n                color: #fff;\r\n                line-height: 62px;\r\n            }\r\n\r\n            >div:nth-child(2) {\r\n                background: #f3f3f3;\r\n                margin-top: 8px;\r\n                padding: 7px 0px;\r\n                padding-bottom: 13px;\r\n\r\n                >ul {\r\n                    list-style: none;\r\n                    color: #505050;\r\n                    font-size: 12px;\r\n                    margin-bottom: 0;\r\n\r\n                    >li {\r\n                        list-style: none;\r\n                        height: 53px;\r\n                        line-height: 53px;\r\n                        font-size: 14px;\r\n\r\n                        >a {\r\n                            display: block;\r\n                            height: 53px;\r\n                            padding: 0px 26px;\r\n                            position: relative;\r\n                            transition: all .28s linear;\r\n                            text-decoration: none;\r\n                            color: #505050;\r\n\r\n                            &:hover {\r\n                                color: white;\r\n                                background: #ff7544;\r\n                            }\r\n\r\n                            >span {\r\n                                padding-left: 23px;\r\n                                width: 165px;\r\n                                background: url(./public/img/ico_004.png) left center no-repeat;\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n            >div:nth-child(3) {\r\n                width: 240px;\r\n                height: 240px;\r\n                margin-top: 15px;\r\n                font-size: 12px;\r\n                display: flex;\r\n                flex-wrap: wrap;\r\n                position: relative;\r\n\r\n                >a:nth-child(1) {\r\n                    position: absolute;\r\n                    left: 0px;\r\n                    top: 0px;\r\n                    text-decoration: none;\r\n                    color: #505050;\r\n                    font-size: 12px;\r\n                    width: 118px;\r\n                    height: 118px;\r\n                    background-color: #f1f1f1;\r\n                    text-align: center;\r\n                    position: relative;\r\n\r\n                    >img {\r\n                        position: absolute;\r\n                        top: 30px;\r\n                        left: 50%;\r\n                        margin-left: -26px;\r\n                    }\r\n\r\n                    >p {\r\n                        position: absolute;\r\n                        bottom: 17px;\r\n                        margin: 0;\r\n                        display: block;\r\n                        width: 100%;\r\n                        text-align: center;\r\n                        left: 0px;\r\n                    }\r\n\r\n                }\r\n\r\n                >a:nth-child(2) {\r\n                    position: absolute;\r\n                    right: 0px;\r\n                    top: 0px;\r\n                    text-decoration: none;\r\n                    color: #505050;\r\n                    font-size: 12px;\r\n                    width: 118px;\r\n                    height: 118px;\r\n                    background-color: #f1f1f1;\r\n                    text-align: center;\r\n\r\n                    >img {\r\n                        position: absolute;\r\n                        top: 30px;\r\n                        left: 50%;\r\n                        margin-left: -26px;\r\n                    }\r\n\r\n                    >p {\r\n                        position: absolute;\r\n                        bottom: 17px;\r\n                        margin: 0;\r\n                        display: block;\r\n                        width: 100%;\r\n                        text-align: center;\r\n                        left: 0px;\r\n                    }\r\n                }\r\n\r\n                >a:nth-child(3) {\r\n                    position: absolute;\r\n                    left: 0px;\r\n                    bottom: 0px;\r\n                    text-decoration: none;\r\n                    color: #505050;\r\n                    font-size: 12px;\r\n                    width: 118px;\r\n                    height: 118px;\r\n                    background-color: #f1f1f1;\r\n                    text-align: center;\r\n\r\n                    >img {\r\n                        position: absolute;\r\n                        top: 30px;\r\n                        left: 50%;\r\n                        margin-left: -26px;\r\n                    }\r\n\r\n                    >p {\r\n                        position: absolute;\r\n                        bottom: 17px;\r\n                        margin: 0;\r\n                        display: block;\r\n                        width: 100%;\r\n                        text-align: center;\r\n                        left: 0px;\r\n                    }\r\n                }\r\n\r\n                >a:nth-child(4) {\r\n                    position: absolute;\r\n                    right: 0px;\r\n                    bottom: 0px;\r\n                    text-decoration: none;\r\n                    color: #505050;\r\n                    font-size: 12px;\r\n                    width: 118px;\r\n                    height: 118px;\r\n                    background-color: #f1f1f1;\r\n                    text-align: center;\r\n\r\n                    >img {\r\n                        position: absolute;\r\n                        top: 30px;\r\n                        left: 50%;\r\n                        margin-left: -26px;\r\n                    }\r\n\r\n                    >p {\r\n                        position: absolute;\r\n                        bottom: 17px;\r\n                        margin: 0;\r\n                        display: block;\r\n                        width: 100%;\r\n                        text-align: center;\r\n                        left: 0px;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        >div:nth-child(2){\r\n            position: relative;\r\n            width: 936px;\r\n            height: auto;\r\n            float: right;\r\n            display: block;\r\n            color: #666;\r\n            font-size: 12px;\r\n            display: flex;\r\n            padding-top: 25px;\r\n            .spec-preview {\r\n                position: relative;\r\n                width: 298px;\r\n                height: 221.6px;\r\n                border: 1px solid #ccc;\r\n\r\n                img {\r\n                    width: 100%;\r\n                    height: 100%;\r\n                }\r\n\r\n                .event {\r\n                    width: 100%;\r\n                    height: 100%;\r\n                    position: absolute;\r\n                    top: 0;\r\n                    left: 0;\r\n                    z-index: 998;\r\n                }\r\n\r\n                .mask {\r\n                    width: 50%;\r\n                    height: 50%;\r\n                    background-color: rgba(0, 0, 0, 0.3);\r\n                    position: absolute;\r\n                    left: 0;\r\n                    top: 0;\r\n                    display: none;\r\n                }\r\n\r\n                .big {\r\n                    width: 100%;\r\n                    height: 100%;\r\n                    position: absolute;\r\n                    top: -1px;\r\n                    left: 100%;\r\n                    border: 1px solid #aaa;\r\n                    overflow: hidden;\r\n                    z-index: 998;\r\n                    display: none;\r\n                    background: white;\r\n\r\n                img {\r\n                    width: 200%;\r\n                    max-width: 200%;\r\n                    height: 200%;\r\n                    position: absolute;\r\n                    left: 0;\r\n                    top: 0;\r\n                }\r\n                }\r\n\r\n                .event:hover~.mask,\r\n                .event:hover~.big {\r\n                    display: block;\r\n                }\r\n            }\r\n\r\n            >div:nth-child(2){\r\n                padding-left: 10px;\r\n                width: 100%;\r\n                >h1{\r\n                    font-size: 18px;\r\n                    color: #595757;\r\n                    font-weight: 700;\r\n                }\r\n                >span{\r\n                    color: #fa462d;\r\n                    font-size: 14px;\r\n                }\r\n                >div:nth-of-type(1){\r\n                    margin: 20px 0;\r\n                    padding: 15px 0px 15px 15px;\r\n                    background: #f7f8f8;\r\n                    display: flex;\r\n                    align-content: center;\r\n\r\n                    >div:nth-child(1){\r\n                        font-size: 14px;\r\n                        color: #000000;\r\n                        line-height: 30px;\r\n                    }\r\n                    >div:nth-child(2){\r\n                        display: inline-block;\r\n                        font-size: 28px;\r\n                        line-height: 1;\r\n                        color: #fa462d;\r\n                    }\r\n                }\r\n                >div:nth-of-type(2){\r\n                    >span{\r\n                        display: inline-block;\r\n                        height: 48px;\r\n                        line-height: 48px;\r\n                        font-size: 14px;\r\n                        font-family: inherit;\r\n                        width: 75px;\r\n                        // text-align: right;\r\n                        padding-left: 25px;\r\n                        color: #000000;\r\n                    }\r\n                    .shu{\r\n                        width: 120px;\r\n                    }\r\n                    .mai{\r\n                        width: 120px;\r\n                        height: 40px;\r\n                        background: red;\r\n                        color: white;\r\n                        margin-left: 15px;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        \r\n    }\r\n}\r\n.shoppingbtn{\r\n    background: red;\r\n    color: white;\r\n    border: 0;\r\n    &:hover{\r\n        background: red;\r\n        color: white;\r\n    }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}